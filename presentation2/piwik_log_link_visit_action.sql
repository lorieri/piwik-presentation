CREATE TABLE `piwik_log_link_visit_action` (
      `idlink_va` int(11) NOT NULL AUTO_INCREMENT,
      `idsite` int(10) unsigned NOT NULL,
      `idvisitor` binary(8) NOT NULL,
      `server_time` datetime NOT NULL,
      `idvisit` int(10) unsigned NOT NULL,
      `idaction_url` int(10) unsigned NOT NULL,
      `idaction_url_ref` int(10) unsigned NOT NULL,
      `idaction_name` int(10) unsigned DEFAULT NULL,
      `idaction_name_ref` int(10) unsigned NOT NULL,
      `time_spent_ref_action` int(10) unsigned NOT NULL,
      `custom_var_k1` varchar(200) DEFAULT NULL,
      `custom_var_v1` varchar(200) DEFAULT NULL,
      `custom_var_k2` varchar(200) DEFAULT NULL,
      `custom_var_v2` varchar(200) DEFAULT NULL,
      `custom_var_k3` varchar(200) DEFAULT NULL,
      `custom_var_v3` varchar(200) DEFAULT NULL,
      `custom_var_k4` varchar(200) DEFAULT NULL,
      `custom_var_v4` varchar(200) DEFAULT NULL,
      `custom_var_k5` varchar(200) DEFAULT NULL,
      `custom_var_v5` varchar(200) DEFAULT NULL,
      KEY (`idlink_va`),
      KEY `index_idvisit` (`idvisit`),
      KEY `index_idsite_servertime` (`idsite`,`server_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
PARTITION BY RANGE (to_days(server_time))(
    PARTITION p20120222 VALUES LESS THAN (to_days('2012-02-23')),
    PARTITION p20120223 VALUES LESS THAN (to_days('2012-02-24')),
    PARTITION p20120224 VALUES LESS THAN (to_days('2012-02-25')),
    PARTITION p20120225 VALUES LESS THAN (to_days('2012-02-26')),
    PARTITION p20120226 VALUES LESS THAN (to_days('2012-02-27')),
    PARTITION p20120227 VALUES LESS THAN (to_days('2012-02-28')),
    PARTITION p20120228 VALUES LESS THAN (to_days('2012-02-29')),
    PARTITION p20120229 VALUES LESS THAN (to_days('2012-03-01'))
);
